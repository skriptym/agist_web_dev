{% extends 'base.html' %}
{% load crispy_forms_tags %}

{% block content %}
<div class="bg-dark" style="  position: fixed;top: 0;left: 0;width: 100%;height: 100%;" >
    <div id="map" style="margin-top: 85px; margin-left: auto;
        margin-right: auto; height:600px; width:70%"  ></div>

</div>
<script src="https://cdn.jsdelivr.net/npm/chart.js@2.9.3/dist/Chart.min.js"></script>

 <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css"
   integrity="sha512-xodZBNTC5n17Xt2atTPuE1HxjVMSvLVW9ocqUKLsCC5CXdbqCmblAshOMAS6/keqq/sMZMZ19scR4PsZChSR7A=="
   crossorigin=""/>
 <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"
   integrity="sha512-XQoYMqMTK8LvdxXYG3nZ448hOEQiglfqkJs1NOQV44cWnUrBc8PkAOcXy20w0vlaXaVUearIOBhiXZ5V3ynxwA=="
   crossorigin=""></script>


<!--Add draw plugin -->
<link rel='stylesheet' href='//api.tiles.mapbox.com/mapbox.js/plugins/leaflet-draw/v0.2.2/leaflet.draw.css' />
<script src='//api.tiles.mapbox.com/mapbox.js/plugins/leaflet-draw/v0.2.2/leaflet.draw.js'></script>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script>

var map = L.map('map').setView([{{ pozy|safe }}, {{ pozx|safe }}], 11);
L.tileLayer('https://api.mapbox.com/styles/v1/mapbox/satellite-streets-v11/tiles/{z}/{x}/{y}?access_token=pk.eyJ1Ijoic2tyaXB0eW0iLCJhIjoiY2t0b3E5YjgyMGZjczJ4bDR6YWRqd2RkYiJ9.xPPpzpZsLz2tYqzJjXi-5g', {attribution: '&copy; <a href="http://osm.org/copyright">OpenStreetMap</a> contributors'}).addTo(map);
var featureGroup = L.featureGroup().addTo(map);
var geojsonFeature ={{ geojson|safe }};
var myStyle = {
    "color": "#ff7800",
    "weight": 1,

};
L.geoJSON(geojsonFeature,{
    style: myStyle
}).addTo(map);



L.geoJSON(states, {
    style: function(feature) {
        switch (feature.properties.party) {
            case 'Republican': return {color: "#ff0000"};
            case 'Democrat':   return {color: "#0000ff"};
        }
    }
}).addTo(map);




</script>



{% endblock content %}
